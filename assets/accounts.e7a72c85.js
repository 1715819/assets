var j=Object.defineProperty,B=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var k=(n,a,r)=>a in n?j(n,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[a]=r,m=(n,a)=>{for(var r in a||(a={}))P.call(a,r)&&k(n,r,a[r]);if(S)for(var r of S(a))F.call(a,r)&&k(n,r,a[r]);return n},f=(n,a)=>B(n,D(a));import{h as G,j as z,R as e,k as H,r as I,n as x,q as R,A as i,au as _,av as L,aw as A,ax as d,ay as J,az as p,aA as K,aB as N,aC as V,aD as W,aE as X,aF as $,aG as Q,z as U,M as Y,E as Z,G as ee,J as te,K as ae,N as le,ak as ne,O as se}from"./vendor.ca2a2d55.js";import{e as C}from"./index.3fc1846c.js";import{F as b}from"./form-item.6c4081dd.js";import"./index.c85654c4.js";const w={id:0,name:"",type:"",root_folder:"",status:"",index:0};function re(n){switch(n){case"string":return"";case"bool":return!1;case"select":return"";case"number":return 0}}const oe=[{name:"name",label:"name",type:"string",required:!0},{name:"index",label:"index",type:"number",required:!0,description:"for sort"}],pe=()=>{const n=G(),{t:a}=z(),[r,T]=e.useState([]),[v,O]=e.useState({}),[s,c]=e.useState(w),[y,g]=e.useState(!1),[q,h]=e.useState(!1),u=H(),M=()=>{C.get("drivers").then(t=>{const l=t.data;l.code!==200?n({title:a(l.message),status:"error",duration:3e3,isClosable:!0}):O(l.data)})},E=()=>{h(!0),C.get("accounts").then(t=>{h(!1);const l=t.data;l.code!==200?n({title:a(l.message),status:"error",duration:3e3,isClosable:!0}):T(l.data)})};return I.exports.useEffect(()=>{E(),M()},[]),e.createElement(x,{w:"full"},e.createElement(R,null,e.createElement(i,{onClick:()=>{c(w),g(!1),u.onOpen()}},a("Add")),e.createElement(i,{colorScheme:"orange",isLoading:q,onClick:()=>{E()}},a("Refresh"))),e.createElement(x,{overflowX:"auto"},e.createElement(_,{w:"full"},e.createElement(L,null,e.createElement(A,null,e.createElement(d,null,a("name")),e.createElement(d,null,a("type")),e.createElement(d,null,a("root_folder")),e.createElement(d,null,a("index")),e.createElement(d,null,a("status")),e.createElement(d,null,a("operation")))),e.createElement(J,null,r.map(t=>e.createElement(A,{key:t.id},e.createElement(p,null,t.name),e.createElement(p,null,t.type),e.createElement(p,null,t.root_folder),e.createElement(p,null,t.index),e.createElement(p,null,t.status),e.createElement(p,{whiteSpace:"nowrap"},e.createElement(i,{onClick:()=>{c(t),g(!0),u.onOpen()}},a("Edit")),e.createElement(K,null,e.createElement(N,null,e.createElement(i,{ml:"1",colorScheme:"red"},a("Delete"))),e.createElement(V,{whiteSpace:"normal"},e.createElement(W,null),e.createElement(X,null),e.createElement($,null,a("Confirmation!")),e.createElement(Q,null,e.createElement(U,{mb:"1"},a('Are you sure you want to delete "{{name}}" ?',{name:t.name})),e.createElement(i,{colorScheme:"red",onClick:()=>{C.delete("account",{params:{id:t.id}}).then(l=>{const o=l.data;o.code!==200?n({title:a(o.message),status:"error",duration:3e3,isClosable:!0}):(n({title:a(o.message),status:"success",duration:3e3,isClosable:!0}),E())})}},a("Confirm"))))))))))),e.createElement(Y,{isOpen:u.isOpen,onClose:u.onClose,size:"6xl"},e.createElement(Z,null),e.createElement(ee,null,e.createElement(te,null,a(y?"Save":"Add")),e.createElement(ae,null),e.createElement(le,{pb:6},e.createElement(ne,{minChildWidth:"250px",spacing:"2"},e.createElement(b,{type:"select",readOnly:y,required:!0,label:a("type"),value:s.type,values:Object.keys(v),onChange:t=>{const l=m({},s);l.type=t;for(const o of v[t])Object.keys(l).includes(o.name)||(l[o.name]=re(o.type));c(l)}}),oe.map(t=>{var l;return e.createElement(b,{key:t.name,type:t.type,label:t.label,value:s[t.name],description:t.description,required:t.required,values:(l=t.values)==null?void 0:l.split(","),onChange:o=>{t.type!=="bool"?c(f(m({},s),{[t.name]:o})):c(f(m({},s),{[t.name]:!s[t.name]}))}})}),s.type&&v[s.type].map(t=>{var l;return e.createElement(b,{key:t.name,type:t.type,label:t.label,value:s[t.name],description:t.description,required:t.required,values:(l=t.values)==null?void 0:l.split(","),onChange:o=>{t.type!=="bool"?c(f(m({},s),{[t.name]:o})):c(f(m({},s),{[t.name]:!s[t.name]}))}})}))),e.createElement(se,null,e.createElement(i,{mr:3,colorScheme:"gray",onClick:u.onClose},a("Cancle")),e.createElement(i,{onClick:()=>{console.log(s),C.post(`account/${y?"save":"create"}`,s).then(t=>{const l=t.data;l.code!==200?(n({title:a(l.message),status:"error",duration:3e3,isClosable:!0}),y||(E(),u.onClose())):(n({title:a(l.message),status:"success",duration:3e3,isClosable:!0}),E(),u.onClose())})}},a("Save"))))))};export{pe as default};
